(this["webpackJsonpsav-state"]=this["webpackJsonpsav-state"]||[]).push([[0],{22:function(e,t,s){},23:function(e,t,s){},24:function(e,t,s){},26:function(e,t,s){},27:function(e,t,s){},28:function(e,t,s){},29:function(e,t,s){},48:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),n=s(16),i=s.n(n),r=(s(22),s(4)),o=s(3),d=(s(23),s(24),s(0)),j=function(e){var t=e.show,s=e.OpenPopup;return Object(d.jsxs)("div",{className:"tvCard",onClick:function(){return s(t.id)},children:[Object(d.jsx)("img",{"data-testid":"showImage",src:t.image?t.image.medium:"loading image...",alt:t.image?t.image.original:"no image currently available"}),Object(d.jsx)("div",{className:"name",children:Object(d.jsx)("h3",{"data-testid":"showName",children:t.name})})]})},u=(s(26),s(27),function(e){var t=e.image,s=e.number;return Object(d.jsxs)("div",{className:"episodeCard",children:[Object(d.jsxs)("h4",{className:"episodeNum",children:["Episode ",s]}),Object(d.jsx)("img",{src:t?t.medium:"image not available",alt:"episode thumbnail"})]})}),l=(s(28),function(e){var t=e.season,s=e.index;return Object(d.jsxs)("div",{className:"seasonContainer",children:[Object(d.jsxs)("h2",{children:["Season ",s]}),Object(d.jsx)("div",{className:"seasonBox",children:t.map((function(e){return Object(d.jsx)(u,Object(r.a)({},e),e.id)}))})]})}),h=function(e){var t=e.popupShow,s=e.cast,a=e.data,c=e.closePopup,n=a.reduce((function(e,t,s){var a=t.season;return null==e[a]&&(e[a]=[]),e[a].push(t),e}),[]);return Object(d.jsx)("div",{className:"popup",children:Object(d.jsxs)("div",{className:"popupPage",children:[Object(d.jsxs)("div",{className:"showInformation",children:[Object(d.jsx)("div",{className:"poster",children:Object(d.jsx)("img",{"data-testid":"showImage",src:t.image?t.image.medium:"none",alt:""})}),Object(d.jsxs)("div",{className:"information",children:[Object(d.jsxs)("div",{"data-testid":"showTitle",className:"title",children:[Object(d.jsxs)("h1",{children:[t&&t.name," (",t.premiered&&t.premiered.substring(0,t.premiered.indexOf("-")),")"]}),Object(d.jsx)("div",{"data-testid":"closeButton",className:"closeButton",children:Object(d.jsx)("button",{onClick:c,children:"X"})})]}),Object(d.jsx)("p",{"data-testid":"showSummary",children:t.summary&&t.summary.replace(/<\/?[^>]+(>|$)/g,"")}),Object(d.jsxs)("div",{"data-testid":"showCast",className:"cast",children:[Object(d.jsx)("h3",{children:"Cast:"}),Object(d.jsx)("p",{children:s&&s.map((function(e){return e.person.name+", "}))})]}),Object(d.jsxs)("div",{"data-testid":"showGenre",className:"genre",children:[Object(d.jsx)("h3",{children:"Genres:"}),Object(d.jsx)("p",{children:t.genres&&t.genres.join(", ")})]}),Object(d.jsxs)("div",{"data-testid":"showStatus",className:"status",children:[Object(d.jsx)("h3",{children:"Status:"}),Object(d.jsx)("p",{children:t&&t.status})]})]})]}),n.map((function(e,t){return[Object(d.jsx)(l,{index:t,season:e},t)]}))]})})},m=(s(29),function(e){var t=e.handleInput,s=e.search,a=e.closePopup;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{"data-testid":"mediaSearch",className:"mediaSearch",children:Object(d.jsx)("h3",{children:"Media Search"})}),Object(d.jsxs)("div",{"data-testid":"navbar",className:"navbar",children:[Object(d.jsx)("div",{"data-testid":"title",className:"title",children:Object(d.jsx)("h1",{children:"Sav State"})}),Object(d.jsx)("div",{"data-testid":"search",className:"search",children:Object(d.jsx)("input",{"data-testid":"input",type:"text",placeholder:"search for a series...",value:s,className:"searchbox",onChange:t,onClick:a})})]})]})}),b=s(17),O=s.n(b);var p=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),s=t[0],c=t[1],n=Object(a.useState)((function(){var e=localStorage.getItem("selected");return e?JSON.parse(e):[]})),i=Object(o.a)(n,2),u=i[0],l=i[1],b=Object(a.useState)((function(){var e=localStorage.getItem("search");return e||""})),p=Object(o.a)(b,2),f=p[0],v=p[1],x=Object(a.useState)((function(){return f?"https://api.tvmaze.com/search/shows?q="+f:"https://api.tvmaze.com/schedule?country=GB"})),g=Object(o.a)(x,2),S=g[0],N=g[1],w=Object(a.useState)((function(){var e=localStorage.getItem("id");return e?Number(e):1})),I=Object(o.a)(w,2),C=I[0],P=I[1];Object(a.useEffect)((function(){fetch(S).then((function(e){return e.json()})).then((function(e){c(e)}))}),[S]),Object(a.useEffect)((function(){localStorage.setItem("search",f)}),[f]);var y=function(e){var t="https://api.tvmaze.com/shows/"+e+"/episodes";P(e),O()(t).then((function(e){var t=e.data;l(t)}))};Object(a.useEffect)((function(){localStorage.setItem("id",String(C))}),[C]),Object(a.useEffect)((function(){localStorage.setItem("selected",JSON.stringify(u))}),[u]);var E=function(){l([]),P(1)},z=Object(a.useState)([]),B=Object(o.a)(z,2),k=B[0],F=B[1],J=Object(a.useState)([]),G=Object(o.a)(J,2),L=G[0],T=G[1];return Object(a.useEffect)((function(){fetch("https://api.tvmaze.com/shows/"+String(C)).then((function(e){return e.json()})).then((function(e){F(e)}))}),[C]),Object(a.useEffect)((function(){fetch("https://api.tvmaze.com/shows/"+String(C)+"/cast").then((function(e){return e.json()})).then((function(e){T(e)}))}),[C]),Object(d.jsxs)("div",{className:"landing",children:[Object(d.jsx)(m,{handleInput:function(e){v(e.target.value),N("https://api.tvmaze.com/search/shows?q="+e.target.value)},search:f,closePopup:E}),Object(d.jsx)("div",{className:"showList",children:s&&s.map((function(e){return Object(d.jsx)(j,Object(r.a)(Object(r.a)({},e),{},{OpenPopup:y}),e.id?e.id:e.show.id)}))}),!!u.length&&Object(d.jsx)(h,{popupShow:k,cast:L,data:u,closePopup:E})]})},f=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,49)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),a(e),c(e),n(e),i(e)}))};i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(p,{})}),document.getElementById("root")),f()}},[[48,1,2]]]);
//# sourceMappingURL=main.6e7fb07c.chunk.js.map